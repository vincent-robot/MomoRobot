<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Momorobot Manager</title>
    <meta name="viewport" content="width=device-width">

    <!-- Feuille de styles génériques -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" type="text/css">  

    <style type="text/css">
        form { position: relative; }
        input[type="range"] {
            position: relative;
            margin-left: 1em;
        }
        input[type="range"]:after, input[type="range"]:before {
            position: absolute;
            top: 1em;
            color: #aaa;
        }
        input[type="range"]:before {
            left:0em; 
            content: attr(min);
        }
        input[type="range"]:after {
            right: 0em;
            content: attr(max);
        }
        output {
            position: absolute;
            top: 35px; left: 70px;
        }
        </style>       
    

    <script src="{{ url_for('static', filename='joy.js') }}"></script>
</head>

<body>
    <h1> MOMOROBOT  </h1>
    <h1> Manual workout </h1>
    <div id="wrap">
    <br /><br /><br /><br />
  
    <div id="joy1Div"  style="width:400px;height:400px;margin-bottom:20px;"> </div>
        Position X:<input id="joy1PosizioneX" type="text" /><br />
        Position Y:<input id="joy1PosizioneY" type="text" /><br />
        Direction:<input id="joy1Direzione" type="text" /><br />
        X :<input id="joy1X" type="text" /></br>
        Y :<input id="joy1Y" type="text" />
    </div>

    <br /><br /><br /><br />
    <form action="/manual" method="get" id="myform">
        <label for="position"> Position </label>
        <input type="range" id="position" name="position" value="{{position}}" max="100" min="0" step="5" onchange="submit_function()"> 
        <br /><br /><br />
        <input type="radio" id="Forward" name="direction" value="1" {{checked_forward}} onchange="submit_function()">
        <label for="avant">Forward</label><br>
        <input type="radio" id="Reward" name="direction" value="2" {{checked_backward}} onchange="submit_function()">
        <label for="avant">Reward</label><br>

        <br /><br /><br /><br />
        <input type="submit" value="Submit">

    </form>
    

    <p> {{date_du_jour}} </p>

    <script type="text/javascript">
        var Joy1 = new JoyStick('joy1Div');

        var joy1IinputPosX = document.getElementById("joy1PosizioneX");
        var joy1InputPosY = document.getElementById("joy1PosizioneY");
        var joy1Direzione = document.getElementById("joy1Direzione");
        var joy1X = document.getElementById("joy1X");
        var joy1Y = document.getElementById("joy1Y");

        setInterval(function(){ joy1IinputPosX.value=Joy1.GetPosX(); }, 50);
        setInterval(function(){ joy1InputPosY.value=Joy1.GetPosY(); }, 50);
        setInterval(function(){ joy1Direzione.value=Joy1.GetDir(); }, 50);
        setInterval(function(){ joy1X.value=Joy1.GetX(); }, 50);
        setInterval(function(){ joy1Y.value=Joy1.GetY(); }, 50);


        function submit_function() {
            document.getElementById("myform").submit();
        }
    </script>
</body>
</html>
